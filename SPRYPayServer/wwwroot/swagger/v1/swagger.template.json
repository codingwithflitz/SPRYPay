{
    "openapi": "3.0.0",
    "info": {
        "title": "SPRYPay Greenfield API",
        "version": "v1",
        "description": "A full API to use your SPRYPay Server",
        "contact": {
            "name": "SPRYPay Server",
            "url": "https://sprypayserver.org"
        },
        "license": {
            "name": "MIT",
            "url": "https://github.com/sprypayserver/sprypayserver/blob/master/LICENSE"
        }
    },
    "servers": [
        {
            "url": "/",
            "description": "SPRYPay Server Greenfield API"
        }
    ],
    "components": {
        "schemas": {
            "ValidationProblemDetails": {
                "type": "array",
                "description": "An array of validation errors of the request",
                "items": {
                    "type": "object",
                    "description": "A specific validation error on a json property",
                    "properties": {
                        "path": {
                            "type": "string",
                            "nullable": false,
                            "description": "The json path of the property which failed validation"
                        },
                        "message": {
                            "type": "string",
                            "nullable": false,
                            "description": "User friendly error message about the validation"
                        }
                    }
                }
            },
            "ProblemDetails": {
                "type": "object",
                "description": "Description of an error happening during processing of the request",
                "properties": {
                    "code": {
                        "type": "string",
                        "nullable": false,
                        "description": "An error code describing the error"
                    },
                    "message": {
                        "type": "string",
                        "nullable": false,
                        "description": "User friendly error message about the error"
                    }
                }
            },
            "UnixTimestamp": {
                "type": "number",
                "format": "int32",
                "example": 1592312018,
                "description": "A unix timestamp in seconds"
            },
            "SpeedPolicy": {
                "type": "string",
                "description": "`\"HighSpeed\"`: 0 confirmations (1 confirmation if RBF enabled in transaction)   \n`\"MediumSpeed\"`: 1 confirmation   \n`\"LowMediumSpeed\"`: 2 confirmations   \n`\"LowSpeed\"`: 6 confirmations\n",
                "x-enumNames": [
                    "HighSpeed",
                    "MediumSpeed",
                    "LowSpeed",
                    "LowMediumSpeed"
                ],
                "enum": [
                    "HighSpeed",
                    "MediumSpeed",
                    "LowSpeed",
                    "LowMediumSpeed"
                ]
            },
            "CheckoutType": {
                "type": "string",
                "description": "`\"V1\"`: The original checkout form   \n`\"V2\"`: The new experimental checkout form",
                "nullable": true,
                "default": "V1",
                "x-enumNames": [
                    "V1",
                    "V2"
                ],
                "enum": [
                    "V1",
                    "V2"
                ]
            },
            "TimeSpan": {
                "type": "number",
                "format": "int32",
                "example": 90
            },
            "TimeSpanSeconds": {
                "allOf": [ { "$ref": "#/components/schemas/TimeSpan" } ],
                "format": "seconds",
                "description": "A span of times in seconds"
            },
            "TimeSpanMinutes": {
                "allOf": [ { "$ref": "#/components/schemas/TimeSpan" } ],
                "format": "minutes",
                "description": "A span of times in minutes"
            }
        },
        "securitySchemes": {
            "API_Key": {
                "type": "apiKey",
                "description": "SPRYPay Server supports authenticating and authorizing users through an API Key that is generated by them. Send the API Key as a header value to Authorization with the format: `token {token}`. For a smoother experience, you can generate a url that redirects users to an API key creation screen.\n\n The following permissions are available to the context of the user creating the API Key:\n\n* `unrestricted`: Unrestricted access\n* `sprypay.user.candeleteuser`: Delete user\n* `sprypay.user.canviewprofile`: View your profile\n* `sprypay.user.canmodifyprofile`: Manage your profile\n* `sprypay.user.canmanagenotificationsforuser`: Manage your notifications\n* `sprypay.user.canviewnotificationsforuser`: View your notifications\n\nThe following permissions are available if the user is an administrator:\n\n* `sprypay.server.canviewusers`: View users\n* `sprypay.server.cancreateuser`: Create new users\n* `sprypay.server.canmodifyserversettings`: Manage your server\n* `sprypay.server.canuseinternallightningnode`: Use the internal lightning node\n* `sprypay.server.canviewlightninginvoiceinternalnode`: View invoices from internal lightning node\n* `sprypay.server.cancreatelightninginvoiceinternalnode`: Create invoices with internal lightning node\n\nThe following permissions applies to all stores of the user, you can limit to a specific store with the following format: `sprypay.store.cancreateinvoice:6HSHAEU4iYWtjxtyRs9KyPjM9GAQp8kw2T9VWbGG1FnZ`:\n\n* `sprypay.store.canmodifystoresettings`: Modify your stores\n* `sprypay.store.canviewcustodianaccounts`: View exchange accounts linked to your stores\n* `sprypay.store.canmanagecustodianaccounts`: Manage exchange accounts linked to your stores\n* `sprypay.store.candeposittocustodianaccount`: Deposit funds to exchange accounts linked to your stores\n* `sprypay.store.canwithdrawfromcustodianaccount`: Withdraw funds from exchange accounts to your store\n* `sprypay.store.cantradecustodianaccount`: Trade funds on your store's exchange accounts\n* `sprypay.store.webhooks.canmodifywebhooks`: Modify stores webhooks\n* `sprypay.store.canviewstoresettings`: View your stores\n* `sprypay.store.cancreateinvoice`: Create an invoice\n* `sprypay.store.canviewinvoices`: View invoices\n* `sprypay.store.canmodifyinvoices`: Modify invoices\n* `sprypay.store.canmodifypaymentrequests`: Modify your payment requests\n* `sprypay.store.canviewpaymentrequests`: View your payment requests\n* `sprypay.store.canmanagepullpayments`: Manage your pull payments\n* `sprypay.store.cancreatepullpayments`: Create pull payments\n* `sprypay.store.cancreatenonapprovedpullpayments`: Create non-approved pull payments\n* `sprypay.store.canuselightningnode`: Use the lightning nodes associated with your stores\n* `sprypay.store.canviewlightninginvoice`: View the lightning invoices associated with your stores\n* `sprypay.store.cancreatelightninginvoice`: Create invoices from the lightning nodes associated with your stores\n\nNote that API Keys only limits permission of a user and can never expand it. If an API Key has the permission `sprypay.server.canmodifyserversettings` but that the user account creating this API Key is not administrator, the API Key will not be able to modify the server settings.\nSome permissions may include other permissions, see [this operation](#operation/permissionsMetadata).\n",
                "name": "Authorization",
                "in": "header"
            },
            "Basic": {
                "type": "http",
                "description": "SPRYPay Server supports authenticating and authorizing users through the Basic HTTP authentication scheme. Send the user and password encoded in base64 with the format `Basic {base64(username:password)}`. Using this authentication method implicitly provides you with the `unrestricted` permission",
                "scheme": "Basic"
            }
        }
    },
    "security": [
        {
            "API_Key": [],
            "Basic": []
        }
    ]
}
